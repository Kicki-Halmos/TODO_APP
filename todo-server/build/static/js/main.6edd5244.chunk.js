(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{111:function(e,t,r){},453:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(38),s=r.n(o),c=r(6),i=r(17),u=r(28),d=Object(u.b)({name:"todo",initialState:{todoList:[]},reducers:{getTodoList:function(e,t){e.todoList=t.payload.todoList},addTodoItem:function(e,t){e.todoList.push(t.payload.todoItem)},updateTodoItem:function(e,t){var r=e.todoList.map((function(e){return e._id===t.payload.updatedItem._id?t.payload.updatedItem:e}));e.todoList=r},deleteTodoItem:function(e,t){var r=t.payload.id;e.todoList=e.todoList.filter((function(e){return e._id!==r}))},clearTodoList:function(e,t){e.todoList=[]}}}),l=d.actions,b=d,p=Object(u.b)({name:"user",initialState:{token:null,errorMessage:""},reducers:{signup:function(e,t){e.token=t.payload.token,e.errorMessage=""},login:function(e,t){e.token=t.payload.token,e.errorMessage=""},logout:function(e,t){e.token=null,e.errorMessage=""},addErrorMessage:function(e,t){e.errorMessage=t.payload.errorMessage},clearErrorMessage:function(e,t){e.errorMessage=""}}}),j=p.actions,x=p,f=Object(u.a)({reducer:{todo:b.reducer,user:x.reducer}}),m=(r(111),r(7)),h=(0,r(9).createBrowserHistory)(),O=r(4),g=r.n(O),v=r(8),w=r(92),k=r.n(w).a.create({baseURL:"https://limitless-hollows-99215.herokuapp.com/"}),y=function(e){return k.get("/api/todo-list/".concat(e))};k.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}));var T=function(e,t){return k.post("/api/todo-list",{title:e,body:t})},N=function(){return k.get("/api/todo-list")},M=function(e,t,r){return k.put("/api/todo-list/".concat(e),{title:t,body:r})},E=function(e){return k.delete("/api/todo-list/".concat(e))},L=function(e,t){return k.post("/api/signup",{email:e,password:t})},S=function(e,t){return k.post("/api/login",{email:e,password:t})},I=T,C=N,F=M,K=E,D=L,_=S,A=function(){return function(e){var t=localStorage.getItem("token");t?e(j.login({token:t})):h.push("/login")}},U=r(46),B=r(1),P=function(e){var t=Object(c.b)(),r="";e.lastEdited&&(r=e.lastEdited.slice(0,10));return Object(B.jsx)("div",{children:Object(B.jsxs)("div",{className:"p-6 max-w-sm mx-auto bg-white rounded-xl shadow-md items-start space-x-4 m-4 flex flex-col justify-between",children:[Object(B.jsxs)(i.b,{to:"/todo-list/".concat(e.id),children:[Object(B.jsx)("p",{className:"text-md font-semibold mb-2",children:e.title}),Object(B.jsx)(U.a.Markdown,{source:e.body,className:"text-sm"})]}),Object(B.jsxs)("div",{children:[Object(B.jsxs)("p",{className:"text-sm mt-4 text-gray-500",children:["last edited:"," ",r]}),Object(B.jsx)("button",{className:"py-2 px-8 mt-2 font-semibold rounded-lg shadow-md text-white bg-green-500 hover:bg-green-700",type:"button",onClick:function(){var r;t((r=e.id,function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(r);case 2:if("OK"===e.sent.statusText){e.next=5;break}throw new Error("Could not delete todo item");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,n();case 4:t(l.deleteTodoItem({id:r})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t(j.addErrorMessage({errorMessage:e.t0.response.data.error}));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()))},children:"Delete"})]})]})})},R=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.todo.todoList}));return Object(n.useEffect)((function(){e(A()),e(function(){var e=Object(v.a)(g.a.mark((function e(t){var r,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=Object(v.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:if("OK"===(t=e.sent).statusText){e.next=5;break}throw new Error("Could not fetch todo list!");case 5:return r=t.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,r();case 4:n=e.sent,t(l.getTodoList({todoList:n.data})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(j.addErrorMessage({errorMessage:e.t0.response.data.error}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(B.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[Object(B.jsx)(i.b,{to:"/new-todo",children:Object(B.jsx)("div",{className:"p-6 max-w-md mx-auto bg-white rounded-xl shadow-md items-start space-x-4 m-4",children:Object(B.jsx)("p",{className:"py-14 px-2 text-green-600",children:"Click to enter a new note"})})}),t?t.map((function(e){return Object(B.jsx)(P,{id:e._id,title:e.title,body:e.body,lastEdited:e.updatedAt},e._id)})):Object(B.jsx)("p",{children:"Loading..."})]})},V=r(18),J=function(e){var t=e.initialValues,r=e.id,a=e.onFormSubmit,o=e.btnText,s=Object(n.useState)(t.title),i=Object(V.a)(s,2),u=i[0],d=i[1],b=Object(n.useState)(t.body),p=Object(V.a)(b,2),x=p[0],f=p[1],h=Object(n.useRef)(),O=Object(n.useRef)(),w=Object(m.g)(),k=Object(c.b)();return Object(B.jsx)("div",{className:"p-6 max-w-m mx-auto bg-white rounded-xl shadow-md items-center space-x-4",children:Object(B.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=h.current.value.trim();k("Update"===a?function(e,t,r){return function(){var n=Object(v.a)(g.a.mark((function n(a){var o,s;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=function(){var n=Object(v.a)(g.a.mark((function n(){var a,o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e,t,r);case 2:if("OK"===(a=n.sent).statusText){n.next=5;break}throw new Error("Could not update todo item!");case 5:return o=a.data,n.abrupt("return",o.data);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),n.prev=1,n.next=4,o();case 4:s=n.sent,a(l.updateTodoItem({updatedItem:s})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),a(j.addErrorMessage({errorMessage:n.t0.response.data.error}));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(r,t,x):function(e,t){return function(){var r=Object(v.a)(g.a.mark((function r(n){var a,o;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=function(){var r=Object(v.a)(g.a.mark((function r(){var n,a;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I({title:e,body:t});case 2:if("OK"===(n=r.sent).statusText){r.next=5;break}throw new Error("Could not post todo item!");case 5:return a=n.data,r.abrupt("return",a.data);case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),r.prev=1,r.next=4,a();case 4:o=r.sent,n(l.addTodoItem({todoItem:o})),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n(j.addErrorMessage({errorMessage:r.t0.response.data.error}));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}(t,x)),w.push("/todo-list")},children:[Object(B.jsx)("input",{className:"text-lg m-2 p-2 border-2 rounded-lg",type:"text",name:"title",id:"title",value:u,onChange:function(e){d(e.target.value)},ref:h}),Object(B.jsx)(U.a,{name:"body",id:"body",onChange:f,ref:O,className:"m-2 p-2 border-2 rounded-lg",value:x}),Object(B.jsx)("input",{className:"py-2 px-4 m-2 font-semibold rounded-lg shadow-md text-white bg-green-500 hover:bg-green-700 cursor-pointer",type:"submit",value:o})]})})},q=function(){var e=Object(m.h)(),t=Object(c.b)(),r=e.id,a=Object(n.useState)(),o=Object(V.a)(a,2),s=o[0],i=o[1];return Object(n.useEffect)((function(){t(A())}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(r);case 2:t=e.sent,n={title:t.data.data.title,body:t.data.data.body},i(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),Object(B.jsx)("div",{children:s?Object(B.jsx)(J,{initialValues:{title:s.title,body:s.body},id:r,onFormSubmit:"Update",btnText:"Update"}):Object(B.jsx)("div",{children:"Loading..."})})},z=function(){var e=Object(c.b)();return Object(n.useEffect)((function(){e(A())}),[]),Object(B.jsx)("div",{children:Object(B.jsx)(J,{initialValues:{title:"",id:""},onFormSubmit:"Create",bntText:"Save"})})},H=function(e){var t=e.btnText,r=e.linkText,a=e.linkTo,o=Object(n.useState)(""),s=Object(V.a)(o,2),u=s[0],d=s[1],l=Object(n.useState)(""),b=Object(V.a)(l,2),p=b[0],x=b[1],f=Object(c.b)();return Object(B.jsx)("div",{className:"p-6 max-w-lg mx-auto bg-white rounded-xl shadow-md space-x-4 ",children:Object(B.jsx)("form",{onSubmit:function(e){e.preventDefault(),f("/signup"===a?function(e,t){return function(){var r=Object(v.a)(g.a.mark((function r(n){var a,o;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=function(){var r=Object(v.a)(g.a.mark((function r(){var n,a;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_(e,t);case 2:if("OK"===(n=r.sent).statusText){r.next=5;break}throw new Error("Could not signup user");case 5:return a=n.data,localStorage.setItem("token",a.data.token),r.abrupt("return",a);case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),r.prev=1,r.next=4,a();case 4:o=r.sent,n(j.login({token:o.data.token})),h.push("/todo-list"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),n(j.addErrorMessage({errorMessage:r.t0.response.data.error}));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()}(u,p):function(e,t){return function(){var r=Object(v.a)(g.a.mark((function r(n){var a,o;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=function(){var r=Object(v.a)(g.a.mark((function r(){var n,a;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,D(e,t);case 2:if("OK"===(n=r.sent).statusText){r.next=5;break}throw new Error("Could not signup user");case 5:return a=n.data,localStorage.setItem("token",a.data.token),r.abrupt("return",a);case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),r.prev=1,r.next=4,a();case 4:o=r.sent,n(j.signup({token:o.data.token})),h.push("/todo-list"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),n(j.addErrorMessage({errorMessage:r.t0.response.data.error}));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()}(u,p)),d(""),x("")},children:Object(B.jsxs)("div",{className:"grid grid-cols-1",children:[Object(B.jsx)("label",{className:"ml-2",htmlFor:"email",children:"Email"}),Object(B.jsx)("input",{className:"m-2 p-2 border-2 rounded-lg",type:"email",id:"email",name:"email",onChange:function(e){d(e.target.value.trim())},value:u}),Object(B.jsx)("label",{className:"ml-2",htmlFor:"password",children:"Password"}),Object(B.jsx)("input",{className:"m-2 p-2 border-2 rounded-lg",type:"password",id:"password",name:"password",onChange:function(e){x(e.target.value.trim())},value:p}),Object(B.jsx)("input",{className:"py-2 px-4 m-2 font-semibold rounded-lg shadow-md text-white bg-green-500 hover:bg-green-700 cursor-pointer",type:"submit",value:t}),Object(B.jsx)(i.b,{to:a,children:Object(B.jsx)("button",{type:"button",onClick:function(){f((function(e){e(j.clearErrorMessage())}))},className:"text-green-600 text-bold pl-3",children:r})})]})})})},G=function(e){var t=e.msg;return Object(B.jsx)("div",{className:"text-red-700 font-bold text-center m-4",children:t})},Q=function(){var e=Object(c.c)((function(e){return e.user.errorMessage}));return Object(B.jsxs)("div",{children:[""!==e&&Object(B.jsx)(G,{msg:e}),Object(B.jsx)(H,{btnText:"Login",linkText:"Don't have an account? Signup!",linkTo:"/signup"})]})},W=function(){var e=Object(c.c)((function(e){return e.user.errorMessage}));return Object(B.jsxs)("div",{children:[""!==e&&Object(B.jsx)(G,{msg:e}),Object(B.jsx)(H,{btnText:"Signup",linkText:"Already have an account? Login!",linkTo:"/login"})]})},X=function(){var e=Object(c.c)((function(e){return e.user.token})),t=Object(c.b)();return Object(B.jsxs)("div",{className:"fixed bg-gray-400 w-screen p-4 flex justify-between",children:[Object(B.jsx)("a",{href:"/",className:"font-extrabold text-xl ",children:"TODO APP"}),e&&Object(B.jsx)("button",{type:"button",className:"",onClick:function(){t((function(e){e(j.logout()),e(l.clearTodoList()),localStorage.removeItem("token"),h.push("/login")}))},children:"Logout"})]})};var Y=function(){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(X,{}),Object(B.jsx)("div",{className:"container p-6",children:Object(B.jsx)("div",{className:"mt-9",children:Object(B.jsx)(m.c,{history:h,children:Object(B.jsxs)(m.d,{children:[Object(B.jsx)(m.b,{path:"/",exact:!0,children:Object(B.jsx)(m.a,{to:"/todo-list"})}),Object(B.jsx)(m.b,{path:"/todo-list",exact:!0,children:Object(B.jsx)(R,{})}),Object(B.jsx)(m.b,{path:"/todo-list/:id",children:Object(B.jsx)(q,{})}),Object(B.jsx)(m.b,{path:"/new-todo",children:Object(B.jsx)(z,{})}),Object(B.jsx)(m.b,{path:"/login",children:Object(B.jsx)(Q,{})}),Object(B.jsx)(m.b,{path:"/signup",children:Object(B.jsx)(W,{})}),Object(B.jsx)(m.b,{path:"*",children:Object(B.jsx)("h1",{children:"Not Found"})})]})})})})]})};s.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(c.a,{store:f,children:Object(B.jsx)(i.a,{children:Object(B.jsx)(Y,{})})})}),document.getElementById("root"))}},[[453,1,2]]]);
//# sourceMappingURL=main.6edd5244.chunk.js.map